# VK Sferum Chat Exporter

Инструмент на Python для полного экспорта переписки, вложений и данных участников из **старого** учебного профиля **Сферум (VK Мессенджер)**. Скрипт сохраняет историю в структурированный JSON и создаёт читаемую HTML-страницу, которую можно открыть в любом браузере.

<img src="/1terminaloutput.png" width="48%"> <img src="/1showcasehtml.png" width="48%">

## Возможности
- Полный дамп сообщений: Сохранение всей истории переписки в формате JSON.
- Загрузка медиа: Скачивание фото, видео, голосовых сообщений, документов, стикеров и граффити.
- Профили участников: Загрузка аватаров в максимально возможном качестве и имён участников чата.
- HTML-отчёт: Генерация стилизованной HTML-страницы `chat.html` для удобного просмотра экспорта.
- Локальные ссылки: Все вложения в HTML-файле привязаны к локальным файлам (работает без интернета).

## Настройка и запуск

### 1. Подготовка
Убедитесь, что у вас установлен Python 3.x и библиотека `requests`:
```bash
pip install requests
```

### 2. Получение данных (Самый важный этап)
Скрипту требуются данные авторизации, так как Сферум использует защищенное API ВК.

1.  TOKEN:
    *   Откройте Сферум в браузере (web.vk.me).
    *   Нажмите F12 -> вкладка Network (Сеть).
    *   В поле фильтра введите `access_token`.
    *   На странице Сферума перейдите в настройках в раздел "Мои награды".
    *   Найдите запрос, в параметрах которого есть `mini_app_token`. Скопируйте значение `access_token`.
    *   *Примечание: Токен обычно живет около 5-15 минут.*

2.  COOKIES:
    *   В консоли разработчика перейдите во вкладку Application (Приложение) -> Cookies -> `https://web.vk.me`.
    *   Скопируйте значения для: `remixsid`, `remixstid`, `remixstlid`, `httoken`, `prcl`.

3.  PEER_ID:
    *   Зайдите в нужный чат. В адресной строке URL будет число после `/convo/`. Это и есть ID чата.

### 3. Запуск
Отредактируйте переменные в начале скрипта `main.py` и запустите его:
```bash
python main.py
```

---

## Структура вывода
После работы скрипта появится папка `sferum_dump/`, организованная следующим образом:
```text
sferum_dump/
└── [ID_чата]/
    ├── avatars/            # Фотографии участников
    ├── attachments/        # Все медиафайлы чата
    ├── history.json        # Сырые данные
    └── chat.html           # HTML-отчёт
```

---

## Дисклеймер
Данный скрипт написан в образовательных целях для личного резервного копирования данных. Автор не несёт ответственности за любое использование скрипта, нарушающее правила платформы или законодательство.

## Благодарности
- Часть логики получения истории (`getHistory`) заимствована из проекта [VKMessengerAPI](https://github.com/Sharkow1743/VKMessengerAPI) от Sharkow1743.
- Основной код и структура разработаны с помощью Gemini 3 Flash.
